{{ define "main" }}
<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
  </header>
  <div class="post-content">
    {{ .Content }}
    
    <h2>å±•ç¤ºä¸€è¦§ï¼ˆåˆè¨ˆ{{ len site.Data.exhibitions }}ä»¶ï¼‰</h2>
    
    {{/* å¹´ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆ */}}
    {{ $years := slice }}
    {{ range site.Data.exhibitions }}
      {{ $years = $years | append .year }}
    {{ end }}
    {{ $uniqueYears := sort ($years | uniq) "value" "desc" }}
    
    <div class="exhibitions-list">
      {{ range $uniqueYears }}
        {{ $currentYear := . }}
        {{ $yearExhibitions := where site.Data.exhibitions "year" $currentYear }}
        {{ $count := len $yearExhibitions }}
        
        <h3 style="margin-top: 2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #333;">
          {{ $currentYear }}å¹´ï¼ˆ{{ $count }}ä»¶ï¼‰
        </h3>
        
        {{/* åŒã˜å¹´å†…ã§ã¯æœˆé †ï¼ˆé™é †ï¼‰ã§ã‚½ãƒ¼ãƒˆ */}}
        {{ $sortedExhibitions := sort $yearExhibitions "month" "desc" }}
        
        {{ range $sortedExhibitions }}
        <div class="exhibition-item" style="margin-bottom: 1.5rem; margin-left: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">
          <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">{{ .title }}</h4>
          <div style="color: #666; margin-bottom: 0.5rem;">
            {{ .month }}æœˆ | {{ .venue }}
          </div>
          <div style="margin-bottom: 0.5rem; font-size: 0.9rem;">
            <strong>ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ:</strong> {{ .artist }} | 
            <strong>ã‚¸ãƒ£ãƒ³ãƒ«:</strong> {{ .genre }}
          </div>
          {{ if ne .memo "" }}
          <div style="margin-bottom: 0.5rem; font-size: 0.9rem;">
            <strong>ãƒ¡ãƒ¢:</strong> {{ .memo }}
          </div>
          {{ end }}
          {{ if ne .url "" }}
          <div>
            <a href="{{ .url }}" target="_blank" rel="noopener" style="font-size: 0.9rem;">ğŸ”— å…¬å¼ã‚µã‚¤ãƒˆãƒ»å±•ç¤ºæƒ…å ±</a>
          </div>
          {{ end }}
        </div>
        {{ end }}
      {{ end }}
    </div>
  </div>
</article>
{{ end }}